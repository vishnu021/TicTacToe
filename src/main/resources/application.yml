spring:
  application:
    name: Tic-Tac-Toe
  # Enable virtual threads (Java 21 feature)
  threads:
    virtual:
      enabled: true
  web:
    resources:
      static-locations: "classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/"

server:
  port: 80
  # Use virtual threads for request handling
  tomcat:
    threads:
      max: 200
      min-spare: 10

ws:
  tick:
    endpoint: /ws
    destinationPrefix: /topic/
    appPrefix: /app
    gameStartTopic: /topic/game-start
    gameStepTopic: /topic/game-ws

game:
  user:
    maxCount: 10000
    sessionDuration: 10000

logging:
  level:
    root: WARN
    com.vish.game.tictactoe: DEBUG
  file:
    path: log
    name: log/ttt.log
  logback:
    rollingpolicy:
      max-file-size: 5MB
      max-history: 7

# Actuator endpoints configuration
management:
  server:
    port: ${server.port}
  endpoint:
    info:
      cache:
        time-to-live: 5s
    health:
      show-details: always
      cache:
        time-to-live: 5s
    metrics:
      enabled: true
    prometheus:
      enabled: true
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /actuator
  # Enable observability features
  observations:
    annotations:
      enabled: true
  metrics:
    tags:
      application: ${spring.application.name}
